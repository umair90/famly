<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" id="viewport">
        <script type="text/javascript">
                var viewPortWidth = window.screen.width;
                function setViewport() {
                    if ((navigator.userAgent.toLowerCase().indexOf("android")!=-1)) {
                        
                        var vPort = "width="+viewPortWidth+", maximum-scale=1, minimum-scale=1, initial-scale=1, user-scalable=yes";
                        document.getElementById("viewport").setAttribute("content", vPort);
                    }
                }
                setViewport();
                </script>
                <link href="js/slide.css" rel="stylesheet" media="screen">
            
                            <style>
                                div {
                                    -webkit-touch-callout: none;
                                    -webkit-user-select: none; /* Disable selection/Copy of UIWebView */
                                }
                                body{
                                    background: url(img/back.jpg) repeat;
                                    overflow:hidden;
                                }
                                * { -webkit-tap-highlight-color: rgba(0,0,0,0); }
                                
                                .btn
                                {
                                    text-shadow:none !important;
                                    background:#F88E1E !important;
                                    font-weight:600 !important;
                                    width:100% !important;
                                    height:30px !important;
                                    color:#FFF !important;
                                }
                               
                                #wrapper {
                                    background: url(img/back.jpg) repeat;
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    bottom: 0;
                                    -webkit-transform: translate3d(0px, 0px, 0px);
                                    -webkit-transition: -webkit-transform 0.5s ease-in-out 0s;
                                    z-index: 999;
                                    padding-top: 100px;
                                    width:100%;
                                    overflow-x:hidden;
                                    overflow-y:scroll;
                                }
                            
                                
                                </style>

                            <script src="js/jquery.scrollTo-1.4.3.1-min.js"></script>
                            <script src="js/cordova.js"></script>
                            <script src="js/jquery.js"></script>
                            <script src="js/jquery.blockUI.js"></script>
                            <script src="js/iscroll.js"></script>
                            <script src="bootstrap/js/bootstrap.min.js"></script>
                            <script src="js/sha1.js"></script>
                                                        </head>
    <body>
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
        <link rel="stylesheet" href="slider/stylesheets/jslider.css" type="text/css">
            <link rel="stylesheet" href="slider/stylesheets/jslider.round.css" type="text/css">
                <script type="text/javascript" src="slider/javascripts/jquery.dependClass.js"></script>
                <script type="text/javascript" src="slider/javascripts/jquery.slider.js"></script>

        
        <div id="toppanel" style="position:fixed !important; z-index:9999" class="navbar navbar-inverse navbar-fixed-top">
            
            <div id="panel3" class="panel3">
                <div id="msgList"></div>
                <div id="newMsgButton" style="display:none">
                    <button class="btn" type="button" style="width:30px; height:30px; background:#F88E1E;" onClick="newMessage()"><div style="margin-left:-11px; height:25px; width:25px"><img src="img/newMsg.png"/ style="margin-top:-4px"></div></button>
                </div>
                
                <div id="reply_post" style="display:none;">
                    
                    <div  class="input-append" style="margin-bottom:-7px; margin-top:-6px">
                        <textarea id="repText" rows="3" placeholder="Message" type="text" style="font-size:15px; width:90%; margin-top:4%" onkeypress="linkingRep(event)"></textarea>
                        <!--    <div class="btn-group btn-group-vertical" style="margin-top:-1px">
                         <button id="rib" class="btn btn-large" type="button" style="width:35px;" onClick="addImage()"><div style="height:14px; width:20px"><img src="img/image_post.png" style="margin-top:-10px; margin-left:-20px; "></div></button>
                         <button id="rvb" class="btn btn-large" type="button" style="width:35px;" onClick="addVideo()"><div style="height:14px; width:20px"><img src="img/vid_post.png" style="margin-top:-10px; margin-left:-20px; "></div></button>
                         <button class="btn btn-large" type="button" style="width:35px;" onClick="addLoc()"><div style="height:14px; width:20px"><img src="img/location_post.png" style="height:20px; width:13px; margin-top:-10px; margin-left:-20px; "/></div></button>
                         <button class="btn btn-large" type="button" style="width:35px;"><div style="height:14px; width:20px"><img src="img/schedule_post.png" style="margin-top:-8px; margin-left:-15px; "/></div></button>
                         </div>-->
                    </div>
                    <div id="attachRepLink" class="input-append" style="padding-bottom:1%; display:none">
                        <input id="repLink" placeholder="Add Link"  type="text" style="font-size:15px; width:78%"/>
                        <button class="btn" type="button" style="width:35px;" onClick="showBrowser()"><div style="margin-left:-5px; height:20px; width:20px"><img src="img/link.png" style="margin-top:-4px"></div></button>
                    </div>
                    <div id="repImageDiv" style="position:absolute; margin-left:5%; padding-top:2%; height:30px !important; width:30px !important; display:none">
                        <img id="repImage" style="width:100%; height:100%; overflow:hidden">
                            </div>
                    <div id="repVidDiv" style="position:absolute; margin-left:5%; padding-top:2%; height:30px !important; width:30px !important; display:none">
                        <video id="repVid" style="width:100%; height:100%; overflow:hidden">
                            </div>
                    <div style="margin-left:50%">
                        <button class="btn" type="button" onClick="emptyRep(event)" style="color:#BDBDBD; font-weight:600">Cancel</button>
                        <button class="btn" style="color:#BDBDBD; font-weight:600" onClick="replyMsg()">
                            Send
                        </button>
                    </div>
                    &nbsp;
                </div>
            </div>
            
            <div id="panel4" style=" z-index:999 !important">
                
                <div class="input-append" style="padding-top:5%; margin-bottom:-5px">
                    <textarea id="statText" rows="5" placeholder="What do you want to share?" type="text" style="font-size:15px; width:79%; margin-top:4%" onkeypress="linkingStat(event)"></textarea>
                    <div class="btn-group btn-group-vertical" style="margin-top:-1px">
                        <button id="sib" class="btn btn-large" type="button" style="width:35px;" onClick="addImage()"><div style="height:14px; width:20px"><img src="img/image_post.png" style="margin-top:-10px; margin-left:-20px; "></div></button>
                        <button id="svb" class="btn btn-large" type="button" style="width:35px;" onClick="addVideo()"><div style="height:14px; width:20px"><img src="img/vid_post.png" style="margin-top:-10px; margin-left:-20px; "></div></button>
                        <a id="locList" class="btn btn-large" type="button" style="width:0px;" href="#pop"><div style="height:14px; width:16px"><img src="img/location_post.png" style="margin-top:-10px; margin-left:-15px; "></div></a>
                        <!--     <button class="btn btn-large" type="button" style="width:35px;" onClick="addLoc()"><div style="height:14px; width:20px"><img src="img/location_post.png" style="height:20px; width:13px; margin-top:-10px; margin-left:-20px; "/></div></button>
                         <button class="btn btn-large" type="button" style="width:35px;"><div style="height:14px; width:20px"><img src="img/schedule_post.png" style="margin-top:-8px; margin-left:-15px; "/></div></button> -->
                    </div>
                    
                </div>
                <div id="attachStatLink" class="input-append" style="padding-top:0%; padding-bottom:3%; display:none">
                    <input id="statLink" placeholder="Add Link"  type="text" style="font-size:15px; width:78%"/>
                    <button class="btn" type="button" style="width:35px;" onClick="showBrowser()"><div style="margin-left:-5px; height:20px; width:20px"><img src="img/link.png" style="margin-top:-4px"></div></button>
                </div>
                <div id="statImageDiv" style="position:absolute; margin-left:5%; padding-top:2%; height:30px !important; width:30px !important; display:none">
                    <img id="statImage" style="width:100%; height:100%; overflow:hidden">
                        </div>
                <div id="statVidDiv" style="position:absolute; margin-left:5%; padding-top:2%; height:30px !important; width:30px !important; display:none">
                    <video id="statVid" style="width:100%; height:100%; overflow:hidden">
                        </div>
                <div style=" padding-top:1%; margin-left:38%">
                    <button class="btn" type="button" onClick="emptyStat(event)" style="color:#BDBDBD; font-weight:600">Cancel</button>
                    <div class="btn-group">
                        <button id="updt" class="btn" style="color:#BDBDBD; font-weight:600; z-index:999 !important">Update</button>
                        <button id="updtView" class="btn">
                            <span class="caret"></span>
                        </button>
                    </div>
                </div>
                <div class="progress progress-striped active" id="progCont" style="margin-left:5%; margin-top:5px; width:90%; display:none">
                    <div id="prgbar" class="bar" style="width: 100%;"></div>
                </div>
                <div id="postview" class="layout-slider" style="margin-left:10%; display:none">
                    <input id="Slider2" type="slider" name="price" value="1;10" />
                </div>
                <script>
                    $("#Slider2").slider({ from: 1, to: 10, step: 1, smooth: true, round: 0, limits: false, skin: "round" });
                    </script>
                &nbsp;
            </div>
            
            
            <div id="panel7">
                <div id="recp" style="padding-top:3%; padding-bottom:1%">
                    <input id="msgRecp" placeholder="To" type="text" style="font-size:15px; width:90%"/>
                </div>
                <div class="input-append" style="margin-bottom:-5px">
                    
                    <textarea id="msgText" rows="3" placeholder="Message" type="text" style="font-size:15px; width:90%; margin-top:4%" onkeypress="linkingMsg(event)"></textarea>
                    <!--    <div class="btn-group btn-group-vertical" style="margin-top:-1px">
                     <button id="mib" class="btn btn-large" type="button" style="width:35px;" onClick="addImage()"><div style="height:14px; width:20px"><img src="img/image_post.png" style="margin-top:-10px; margin-left:-20px; "></div></button>
                     <button id="mvb" class="btn btn-large" type="button" style="width:35px;" onClick="addVideo()"><div style="height:14px; width:20px"><img src="img/vid_post.png" style="margin-top:-10px; margin-left:-20px; "></div></button>
                     <button class="btn btn-large" type="button" style="width:35px;" onClick="addLoc()"><div style="height:14px; width:20px"><img src="img/location_post.png" style="height:20px; width:13px; margin-top:-10px; margin-left:-20px; "/></div></button>
                     <button class="btn btn-large" type="button" style="width:35px;"><div style="height:14px; width:20px"><img src="img/schedule_post.png" style="margin-top:-8px; margin-left:-15px; "/></div></button>
                     </div>-->
                    
                </div>
                <div id="attachMsgLink" class="input-append" style="padding-top:0%; padding-bottom:3%; display:none">
                    <input id="msgLink" placeholder="Add Link"  type="text" style="font-size:15px; width:78%"/>
                    <button class="btn" type="button" style="width:35px;" onClick="showBrowser()"><div style="margin-left:-5px; height:20px; width:20px"><img src="img/link.png"/ style="margin-top:-4px"></div></button>
                </div>
                <div id="msgImageDiv" style="position:absolute; margin-left:5%; padding-top:2%; height:30px !important; width:30px !important; display:none">
                    <img id="msgImage" style="width:100%; height:100%; overflow:hidden">
                        </div>
                <div id="msgVidDiv" style="position:absolute; margin-left:5%; padding-top:2%; height:30px !important; width:30px !important; display:none">
                    <video id="msgVid" style="width:100%; height:100%; overflow:hidden">
                        </div>
                <div style=" padding-top:1%; padding-left:50%">
                    <button class="btn" type="button" onClick="emptyMsg(event)" style="color:#BDBDBD; font-weight:600">Cancel</button>
                    <button class="btn" type="button" onClick="sendMsg()" style="color:#BDBDBD; font-weight:600">Send</button>
                </div>
                &nbsp;
            </div>
            
            <div id="panel8" class="panel9">
                <div id="notifList"></div>
            </div>
            
            <div class="tabback">
                <div class="tab navbar navbar-inverse navbar-fixed-top">
                    <div style="width:25%; margin-left:4%;">
                        <button class="btn btn-small pull-left" id="back" onClick="back();">Cancel</button>
                    </div>
                    <div style="width:25%; margin-left:72%;">
                        <button class="btn btn-small pull-right" id="reg" onClick="save()">Save</button>
                    </div>
                    
                </div>
            </div>
                
        </div> <!--panel -->
                
        <div id="wrapper">
        
            <div style="position: relative; float:left; width:96%; margin:2%">
                
                <div id="message" style="margin-top:80px; margin-left:4%; display:none">
                    <div  class="alert alert-info">
                        <button type="button" class="close" onClick="hideAlert1()">&times;</button>
                        <strong>Error!</strong> <span id="incorrect"> </span>
                    </div>
                </div>
    
                <ul class="nav nav-list">
                    <li class="nav-header">Change Name</li>
                    <li><input id="fname" type="text" value="" style="width:95%"></li>
                    <li><input id="lname" type="text" value="" style="width:95%"></li>
                    
                    
                </ul>
            </div>
            

        </div>
        
        <script>

            $(document).ready(function() {
                              $("#fname").val(sessionStorage.getItem('fname'));
                              $("#lname").val(sessionStorage.getItem('lname'));
                              });
           
            
            function back(){
                window.location.href='accSettings.html';
            }
            
            function hideAlert1(){
                $("#message").slideToggle();
                errors = "";
            }
            
            function save(){
                $.blockUI();
                var fn = document.getElementById('fname').value;
                var ln = document.getElementById('lname').value;
                var fnValid=validatefirstName(fn);
                var lnValid=validatelastName(ln);
               // var userNameValid=validateUsername(un);
                 if( fn == "" )
                {
                    //$("#message").attr("style","display:inline;");
                    //$("#incorrect").text("First Name is required");
                    errors += "<br>First Name is required";
                }
                else if( ln == "" )
                {
                    //$("#message").attr("style","display:inline;");
                    //$("#incorrect").text("Last Name is required");
                    errors += "<br>Last Name is required";
                }
                else if( fnValid==false )
                {
                    console.log("It shouldnt login, firstname is invalid")
                    // errors2 += "<br>Invalid Username  !";
                }
                else if( lnValid==false )
                {
                    console.log("It shouldnt login, lastname is invalid")
                    // errors2 += "<br>Invalid Username  !";
                }else{
                    var un=sessionStorage.getItem('username');
                    var hash=sessionStorage.getItem('password');
                    url='http://famly.com/beta/public/ws/changeName.php';
                    $.post(url, {username: un, password: hash, firstName:fn ,lastName:ln },function(data){
                           if (data==1){
                           sessionStorage['fname']=fn;
                           sessionStorage['lname']=ln;
                           window.location.href='accSettings.html';
                           }
                           });
                    
                }if (errors != ""){
                    $("#message").slideDown();
                    $("#incorrect").html(errors);
                    errors = "";
                }
                
            }
            
            function validatefirstName(name){
                var valid=true;
                var filter=/^[a-zA-Z ]+$/;
                var test_bool = filter.test(name);
                if(test_bool==false){
                    //$("#message").attr("style","display:inline;");
                    //$("#incorrect").text("First Name must contain alphabets");
                    errors += "<br>First Name must only contain alphabets";
                    valid=false;
                }
                
                console.log("firstname validated");
                return valid;
                
                
            }
            
            
            function validatelastName(name){
                var valid=true;
                var filter=/^[a-zA-Z ]+$/;
                var test_bool = filter.test(name);
                if(test_bool==false){
                    //$("#message").attr("style","display:inline;");
                    //$("#incorrect").text("Last Name must contain alphabets");
                    errors += "<br>Last Name must contain alphabets";
                    valid=false;
                }
                console.log("lastname validated");
                return valid;
            }
            

            
                        
            </script>

    </body>
</html>


